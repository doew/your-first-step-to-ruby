---
marp: true
---
<!--
headingDivider: 3
-->

# ２ 基礎プログラミング実践 前半

## この章では・・・
この章では、ついにRubyの実際のコードを動かしていく。読者がプログラミングについてどのくらい理解をしたいかというレベルに応じて、次の事柄を意識してほしい。

### プログラミングをできるようになるのが目的ではない場合
あなたが、デザイナーやプログラマーを管理するマネジャーなどで、プログラミングがどういったものか、さわりを知りたい、体験したいと思っている場合、コードがどういった理屈で動いているかを知ることよりも、「ソースコード」というものがあって、それを実行すると「結果」が現れて、「ソースコード」には一定の文法（1章で記述している）があるんだ、という認識で構わない。

サンプルコードを一部変更してみたりして、その動きをみることで、プログラミングに親しみをもち、「訳のわからない難しいもの」から、「ちょっとだけ試したことあるよ」にレベルアップしてもらえたら嬉しい。

### プログラミングできるようになることが目的の場合
あなたが、プログラマーを目指す人であるなど、プログラミングできるようになることを目的としている場合、単にコードをうつして（写経して）、動くのを眺めるだけで満足しないでほしい。

コードの各要素が１章で説明した用語のどれにあたるのかや、解説を読んでわからない部分はGoogle検索するなどしてみて、解説を理解することに努めてほしい。

ただ、一度に全てを理解しようとすると挫折してしまう場合もあるので、あくまでメンタリティとして解説を蔑ろにしないということを意識してほしい。

## Ruby という言語

### 歴史
実はRubyは国産の言語である。「まつもとゆきひろ」氏が開発し、その後はコミュニティによって開発が継続されている。

Ruby on Rails や Sinatra といった拡張ライブラリを用いたウェブアプリケーションとしての利用や、CLIツールの開発が盛ん。

## 実行環境

### プログラミングできる環境
コンピュータが手元にあればすぐにプログラミングができるわけではない。
プログラミングができる「環境」を用意する必要がある。
「環境」には、プログラミングできる環境（Developer Environment)と、プログラム実行環境(Runtime Environment) があり、プログラムを実行するだけであれば実行環境だけあれば良いが、プログラミングするためにはプログラミングできる環境を準備する必要がある。

### YFStRで使う環境
２章では、https://try.ruby-lang.org/ を利用する。
この環境はブラウザを開くだけで、Rubyの一部機能が使えるプログラミング環境が表示されるようになっている。

### 要件について
0章でも取り上げた通り、要件はこれから書くプログラムが必ずやらねばならないことを示したもので、要件を満たすプログラムを書くことがこの章の目的である。

*if you are.... 他言語の経験がある場合や、Rubyを書いたことがある場合はサンプルコードを見ずに要件だけを見てコーディングしてみてほしい。リファレンスやGoogle検索などは活用すると良いだろう。

## 早速 Your First Code
プログラミングでよく初めに書くHello Worldを書いてみよう。
EDITOR に何か入力してある場合には予め消しておくようにしよう。

#### 要件
Hello World と OUTPUT に表示されること

### サンプルコード
```rb
# print関数（メソッド）を用いる
print("Hello World")
```
tips: Rubyでは、関数とメソッドを明確に分けていない。Rubyの組み込みライブラリに含まれるメソッドを慣例的に関数と呼ぶことがある。

tips: `p`メソッドを使っても同じ出力を得られる。 `puts` を使うと少し異なった出力になるので注意しよう。

### plus alpha
他の文字を表示させてみよう。

ex. `Hello`, `こんにちは、世界`, `😀` 

## 計算してみる
コンピュータなので、もちろん計算ができます。電卓でやるような計算をコンピュータにさせてみよう。
*EDITORは一旦まっさらにすること(今後はこの注意書きをしない)。

#### 要件
1+1 の結果を表示させること

### サンプルコード
```rb
# 1+1 をして print で表示させる
print(1 + 1)
```
tips: try ruby のウェブサイトは気が利いているので、最後の行の値をOUTPUTに自動で表示してくれる機能がある。ので、 単に `1 + 1` だけ入力してもOUTPUTされるのだが、実際のRubyプログラムではそうはいかないので注意。

### plus alpha
他の数の四則演算を試してみたり、多項式を試してみよう.

ex. `1 + 2 + 3`, `2 - 4`, `2 * 2`, `4 / 2` 

## 変数を使ってみる
変数を使って代入と計算をしてみよう。ここでは、面倒な二次関数の計算をさせてみる。

#### 要件
1. 変数 `x` に `2` を代入すること。
1. `2x²+4x+10` を計算して変数 `y` に代入すること。
1. `y` の中身を表示すること。

### サンプルコード
```rb
x = 2
y = 2 * x ** 2 + 4 * 2 + 10
print(y)
# 26が表示される
```
tips: ruby では累乗が `**` 演算子で表現できる

### plus alpha
x に代入する値を変えてみよう。

ex. `x = 4` 

## 関数（メソッド）を定義してみる
先ほどの二次関数をプログラムとしても関数にしてさまざまな `x` の場合の値を確認してみよう。

#### 要件
1. `2x²+4x+10` を 引数１つを受け取る `f` というメソッドとして定義すること
1. `f` に 引数として `2` を渡した結果を表示すること
1. `f` に 引数として `4` を渡した結果を表示すること

### サンプルコード
```rb
def f(x)
  2 * x ** 2 + 4 * 2 + 10
end

puts(f(2))
puts(f(4))
```

tips: rubyではメソッドの最後の行が暗黙的にメソッドの返り値になる。

### plus alpha
２つの引数を持つ文字式`2x²+4x+y`で、関数（メソッド）を定義してみよう。そして、 `x=2, y=4` の時の計算結果を出力させてみよう。 

## あいさつするプログラム
１章で擬似言語で表示していたプログラムをRubyで書き直してみよう。

#### 要件
次に示す擬似言語コードを ruby に書き換えること。

##### 擬似言語のコード
```
「名前を入力してください」と表示
キーボードの入力を name 変数に代入
「こんにちは {name} さん」と表示
```

### サンプルコード
```rb
puts("名前を入力して下さい")
name = gets().chomp()
puts("こんにちは #{name}さん")
```
tips: `gets()` メソッドで入力を受け付けることができる
tips: `puts`と同じで`gets`も改行が入ってしまうので、 string オブジェクトのメソッド、`chomp` を使って最後の文字（改行）を取り除くと綺麗になる。

tips: オブジェクトに対して呼ぶメソッドについて、`.`を使ってメソッドを使った場合、`.`の前のオブジェクトを操作するメソッドが呼び出される。`gets().chomp()`は、 `gets`したものを`chomp`するという意味。メソッドコールはチェーン（連鎖）できる。

### plus alpha
メソッドチェーンを試してみよう。

ex. `"ほげもげ".reverse`, `"ほげもげ".reverse.length`

## あいさつするメソッド
擬似言語コードでもまとめたように、あいさつするプログラムをメソッドを使ってまとめてみよう。

#### 要件
次に示す擬似言語コードを ruby に書き換えること。

```
# まず複数行の処理をまとめておく
あいさつの処理() {
  「名前を入力してください」と表示
  キーボードの入力を name 変数に代入
  「こんにちは {name} さん」と表示
}
# するとその後は３行の処理が１行に纏まる
あいさつの処理() 
```

### サンプルコード
```rb
def greeting()
  puts("名前を入力して下さい")
  name = gets().chomp()
  puts("こんにちは #{name}さん")
end

greeting()
```

tips: 実はRubyのメソッド名にはマルチバイト文字が使える。なので、`def greeting()` じゃなくて `def あいさつする()` とかでも動く。

### plus alpha
メソッド名にマルチバイト文字を指定してみよう。
tips: 実際にプログラミングする際には、英数字（ASCII）で命名することが多い（デバッグを簡単にするため）。

ex. `def あいさつする()`

# まとめ
## 簡単なプログラムをしました
この章では、実際にRubyに触れて簡単な処理を書いてきた。なんとなく、Rubyプログラムの雰囲気を掴んでもらえていたらうれしい。

なお、もっといろいろRubyの特徴を知りたい！という方やもうちょっと練習したいという方はTryRubyのレベル５（要約その５）までを実践するとよいだろう。

# ３章の予告

## 次回予告
3章では、もっと実践的なプログラムをしていく。条件分岐、配列、標準ライブラリなどを用いていく。３章が終わる頃には簡素なプログラムであればRubyを用いて書けるようになっていくだろう。
